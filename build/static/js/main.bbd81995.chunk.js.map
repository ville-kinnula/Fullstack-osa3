{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","value","onChange","PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","persons","newFilter","handleDeleteClick","filter","person","name","toLowerCase","includes","map","key","number","onClick","Notification","message","errorExists","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","setPersons","setNewFilter","setNewName","setNewNumber","newNotification","setNewNotification","setErrorExists","useEffect","personServices","initialPersons","event","target","preventDefault","personObject","window","confirm","existingPerson","find","toLocaleLowerCase","returnedPerson","setTimeout","catch","error","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bbd81995.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst del = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, del }","import React, { useState, useEffect } from 'react'\nimport personServices from './services/persons'\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newFilter, setNewFilter] = useState('') \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newNotification, setNewNotification ] = useState('')\n  const [ errorExists, setErrorExists ] = useState(false)\n\n  useEffect(() => {\n    personServices\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleFilterChange = (event) => setNewFilter(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n\n  const addName = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName, number: newNumber\n    }\n    \n    if (persons.map(person => person.name.toLowerCase()).includes(newName.toLowerCase())) {\n        if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n          let existingPerson = persons.find(person => person.name.toLowerCase() === personObject.name.toLocaleLowerCase())\n          let id = existingPerson.id\n          personObject.name = existingPerson.name //added this because capitalized names look nicer\n\n          personServices\n            .update(persons.find(person => person.name.toLowerCase() === personObject.name.toLocaleLowerCase()).id, personObject)\n            .then(returnedPerson => {\n              setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n              setNewName('')\n              setNewNumber('')\n              setNewNotification('Number succesfully changed')\n              setTimeout(() => {\n                setNewNotification('')\n              }, 5000)\n            })\n            .catch(error => {\n\n              setNewNotification(`Information of ${newName} has already been deleted from the server`)\n              setErrorExists(true)\n              setTimeout(() => {\n                setNewNotification('')\n                setErrorExists(false)\n              }, 5000)\n            })\n        }\n    } else {\n        personServices\n          .create(personObject)\n          .then(returnedPerson => {\n            setPersons(persons.concat(returnedPerson))\n            setNewName('')\n            setNewNumber('')\n            setNewNotification(`Added ${personObject.name}`)\n            setTimeout(() => {\n              setNewNotification('')\n            }, 5000)\n          })  \n    }\n  }\n\n  const handleDeleteClick = (id, name) => {\n    if (window.confirm(`delete ${name}?`)) {\n      personServices\n        .del(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id!==id))\n          setNewNotification(`${name} deleted`)\n          setTimeout(() => {\n            setNewNotification('')\n          }, 5000)\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h1>Filter</h1>\n      <Filter value={newFilter} onChange={handleFilterChange} />\n      <h2>Phonebook</h2>\n      <Notification message={newNotification} errorExists={errorExists} />\n      <PersonForm addName={addName} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} newFilter={newFilter} handleDeleteClick={handleDeleteClick}/>\n    \n    </div>\n  )\n\n}\n\nconst Filter = ({value, onChange}) => {\n    return (\n      <form>\n        <div>\n          filter shown with: <input value={value} onChange={onChange} />\n        </div>\n      </form>  \n    )\n}\n\nconst PersonForm = ({addName, newName, handleNameChange, newNumber, handleNumberChange}) => {\n    return (\n      <form onSubmit={addName}>\n        <div>\n          name: <input \n          value={newName}\n          onChange={handleNameChange}/>\n        </div>\n        <div>\n            number: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <button type=\"submit\">save</button>\n      </form>\n\n    )\n}\n\nconst Persons = ({persons, newFilter, handleDeleteClick}) => {\n    return (\n      <ul>\n        {persons.filter(\n          person => person.name.toLowerCase()\n            .includes(newFilter.toLowerCase()))\n            .map(person => \n              <li key={person.name}>\n                {person.name} {person.number} <button onClick={() => {handleDeleteClick(person.id, person.name)}}> delete </button>\n              </li>)}\n      </ul>\n    )\n}\n\nconst Notification = ({message, errorExists}) => {\n  const notificationStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n  \n\n  const errorStyle = {\n    color: 'red',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  if (message === '') {\n    return null\n  }\n  \n  if (errorExists) {\n    return (\n      <div style={errorStyle}>\n        <br />\n        <em>{message}</em>\n      </div>\n    )\n  }\n\n  return (\n    <div style={notificationStyle}>\n      <br />\n      <em>{message}</em>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}